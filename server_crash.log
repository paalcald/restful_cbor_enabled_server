I (24) boot: ESP-IDF v5.3.1 2nd stage bootloader
I (24) boot: compile time Oct 24 2024 09:56:02
I (25) boot: chip revision: v0.3
I (27) boot.esp32c3: SPI Speed      : 80MHz
I (32) boot.esp32c3: SPI Mode       : DIO
I (37) boot.esp32c3: SPI Flash Size : 4MB
I (42) boot: Enabling RNG early entropy source...
I (47) boot: Partition Table:
I (51) boot: ## Label            Usage          Type ST Offset   Length
I (58) boot:  0 nvs              WiFi data        01 02 00009000 00006000
I (65) boot:  1 phy_init         RF data          01 01 0000f000 00001000
I (73) boot:  2 factory          factory app      00 00 00010000 00100000
I (80) boot:  3 www              Unknown data     01 82 00110000 00200000
I (88) boot: End of partition table
I (92) esp_image: segment 0: paddr=00010020 vaddr=3c0c0020 size=23c44h (146500) map
I (123) esp_image: segment 1: paddr=00033c6c vaddr=3fc93000 size=02e48h ( 11848) load
I (126) esp_image: segment 2: paddr=00036abc vaddr=40380000 size=0955ch ( 38236) load
I (136) esp_image: segment 3: paddr=00040020 vaddr=42000020 size=b2578h (730488) map
I (252) esp_image: segment 4: paddr=000f25a0 vaddr=4038955c size=098f4h ( 39156) load
I (265) boot: Loaded app from partition at offset 0x10000
I (265) boot: Disabling RNG early entropy source...
I (277) cpu_start: Unicore app
I (286) cpu_start: Pro cpu start user code
I (286) cpu_start: cpu freq: 160000000 Hz
I (286) app_init: Application information:
I (289) app_init: Project name:     restful_server
I (294) app_init: App version:      1
I (298) app_init: Compile time:     Oct 24 2024 10:03:41
I (304) app_init: ELF file SHA256:  bcb865559...
I (310) app_init: ESP-IDF:          v5.3.1
I (314) efuse_init: Min chip rev:     v0.3
I (319) efuse_init: Max chip rev:     v1.99
I (324) efuse_init: Chip rev:         v0.3
I (329) heap_init: Initializing. RAM available for dynamic allocation:
I (336) heap_init: At 3FC9A830 len 000257D0 (149 KiB): RAM
I (342) heap_init: At 3FCC0000 len 0001C710 (113 KiB): Retention RAM
I (349) heap_init: At 3FCDC710 len 00002950 (10 KiB): Retention RAM
I (356) heap_init: At 50000200 len 00001DE8 (7 KiB): RTCRAM
I (363) spi_flash: detected chip: generic
I (367) spi_flash: flash io: dio
I (372) sleep: Configure to isolate all GPIO pins in sleep state
I (378) sleep: Enable automatic switching of GPIO sleep configuration
I (385) main_task: Started on CPU0
I (385) main_task: Calling app_main()
I (395) example_connect: Start example_connect.
I (405) pp: pp rom version: 9387209
I (405) net80211: net80211 rom version: 9387209
I (415) wifi:wifi driver task: 3fca4664, prio:23, stack:6656, core=0
I (415) wifi:wifi firmware version: ccaebfa
I (415) wifi:wifi certification version: v7.0
I (415) wifi:config NVS flash: enabled
I (425) wifi:config nano formating: disabled
I (425) wifi:Init data frame dynamic rx buffer num: 32
I (425) wifi:Init static rx mgmt buffer num: 5
I (435) wifi:Init management short buffer num: 32
I (435) wifi:Init dynamic tx buffer num: 32
I (445) wifi:Init static tx FG buffer num: 2
I (445) wifi:Init static rx buffer size: 1600
I (455) wifi:Init static rx buffer num: 10
I (455) wifi:Init dynamic rx buffer num: 32
I (455) wifi_init: rx ba win: 6
I (465) wifi_init: accept mbox: 6
I (465) wifi_init: tcpip mbox: 32
I (465) wifi_init: udp mbox: 6
I (475) wifi_init: tcp mbox: 6
I (475) wifi_init: tcp tx win: 5760
I (485) wifi_init: tcp rx win: 5760
I (485) wifi_init: tcp mss: 1440
I (485) wifi_init: WiFi IRAM OP enabled
I (495) wifi_init: WiFi RX IRAM OP enabled
I (495) phy_init: phy_version 1180,01f2a49,Jun  4 2024,16:34:25
I (545) wifi:mode : sta (60:55:f9:c0:27:d4)
I (545) wifi:enable tsf
I (545) example_connect: Connecting to Casita <3...
W (545) wifi:Password length matches WPA2 standards, authmode threshold changes from OPEN to WPA2
I (555) example_connect: Waiting for IP(s)
I (3235) wifi:new:<9,2>, old:<1,0>, ap:<255,255>, sta:<9,2>, prof:6, snd_ch_cfg:0x0
I (3235) wifi:state: init -> auth (0xb0)
I (3245) wifi:state: auth -> assoc (0x0)
I (3255) wifi:state: assoc -> run (0x10)
I (3275) wifi:connected with Casita <3, aid = 12, channel 9, 40D, bssid = c8:7f:54:a1:cc:90
I (3275) wifi:security: WPA2-PSK, phy: bgn, rssi: -34
I (3275) wifi:pm start, type: 1

I (3275) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (3285) wifi:set rx beacon pti, rx_bcn_pti: 0, bcn_timeout: 25000, mt_pti: 0, mt_time: 10000
I (3295) wifi:<ba-add>idx:0 (ifx:0, c8:7f:54:a1:cc:90), tid:6, ssn:1, winSize:64
I (3315) wifi:AP's beacon interval = 102400 us, DTIM period = 1
I (4295) esp_netif_handlers: example_netif_sta ip: 192.168.1.22, mask: 255.255.255.0, gw: 192.168.1.1
I (4295) example_connect: Got IPv4 event: Interface "example_netif_sta" address: 192.168.1.22
I (4395) example_connect: Got IPv6 event: Interface "example_netif_sta" address: fe80:0000:0000:0000:6255:f9ff:fec0:27d4, type: ESP_IP6_ADDR_IS_LINK_LOCAL
I (4395) example_common: Connected to example_netif_sta
I (4405) example_common: - IPv4 address: 192.168.1.22,
I (4405) example_common: - IPv6 address: fe80:0000:0000:0000:6255:f9ff:fec0:27d4, type: ESP_IP6_ADDR_IS_LINK_LOCAL
I (4465) example: Partition size: total: 1920401, used: 1742944
I (4475) esp-rest: Starting HTTP Server
I (4475) main_task: Returned from app_main()
I (8125) wifi:<ba-add>idx:1 (ifx:0, c8:7f:54:a1:cc:90), tid:0, ssn:1, winSize:64
I (62615) esp-rest: Light control: red = 70, green = 80, blue = 99
I (73775) esp-rest: Light control: red = 70, green = 80, blue = -12
Guru Meditation Error: Core  0 panic'ed (Load access fault). Exception was unhandled.

Core  0 register dump:
--- Stack dump detected
MEPC    : 0x42009d68  RA      : 0x42009d68  SP      : 0x3fcb1080  GP      : 0x3fc93800
--- 0x42009d68: light_brightness_post_handler at /home/paalcald/dev/iot/rpi-ii/rest-json-cbor/restful_server/main/rest_server.c:135 (discriminator 1)
0x42009d68: light_brightness_post_handler at /home/paalcald/dev/iot/rpi-ii/rest-json-cbor/restful_server/main/rest_server.c:135 (discriminator 1)

TP      : 0x3fcb1210  T0      : 0x4005890e  T1      : 0x00000000  T2      : 0x00000000
--- 0x4005890e: memset in ROM

S0/FP   : 0x3fcabdc4  S1      : 0x3fcaf0f0  A0      : 0x00000000  A1      : 0x3fcab660
A2      : 0x00000062  A3      : 0x00000062  A4      : 0x0000006f  A5      : 0x00000002
A6      : 0x00000001  A7      : 0x00080000  S2      : 0x00000046  S3      : 0x00000050
S4      : 0x00000022  S5      : 0x00000000  S6      : 0x00000000  S7      : 0x00000000
S8      : 0x00000000  S9      : 0x00000000  S10     : 0x00000000  S11     : 0x00000000
T3      : 0x00000000  T4      : 0x00000000  T5      : 0x00000000  T6      : 0x00000000
MSTATUS : 0x00001881  MTVEC   : 0x40380001  MCAUSE  : 0x00000005  MTVAL   : 0x00000014
--- 0x40380001: _vector_table at /home/paalcald/esp/esp-idfv5.3/components/riscv/vectors_intc.S:54

MHARTID : 0x00000000


--- Backtrace:


0x42009d68 in light_brightness_post_handler (req=0x3fcaf0f0) at /home/paalcald/dev/iot/rpi-ii/rest-json-cbor/restful_server/main/rest_server.c:135
135         int blue = cJSON_GetObjectItem(root, "blue")->valueint;
#0  0x42009d68 in light_brightness_post_handler (req=0x3fcaf0f0) at /home/paalcald/dev/iot/rpi-ii/rest-json-cbor/restful_server/main/rest_server.c:135
#1  0x42043c6c in httpd_uri (hd=hd@entry=0x3fcaf078) at /home/paalcald/esp/esp-idfv5.3/components/esp_http_server/src/httpd_uri.c:329
#2  0x4204488c in httpd_parse_req (hd=hd@entry=0x3fcaf078) at /home/paalcald/esp/esp-idfv5.3/components/esp_http_server/src/httpd_parse.c:663
#3  0x4204495c in httpd_req_new (hd=hd@entry=0x3fcaf078, sd=sd@entry=0x3fcaf790) at /home/paalcald/esp/esp-idfv5.3/components/esp_http_server/src/httpd_parse.c:791
#4  0x42042e9e in httpd_sess_process (hd=0x3fcaf078, session=session@entry=0x3fcaf790) at /home/paalcald/esp/esp-idfv5.3/components/esp_http_server/src/httpd_sess.c:426
#5  0x42041d24 in httpd_process_session (session=0x3fcaf790, context=0x3fcb11ac) at /home/paalcald/esp/esp-idfv5.3/components/esp_http_server/src/httpd_main.c:262
#6  0x4204298a in httpd_sess_enum (hd=hd@entry=0x3fcaf078, enum_function=enum_function@entry=0x42041cd8 <httpd_process_session>, context=context@entry=0x3fcb11ac) at /home/paalcald/esp/esp-idfv5.3/components/esp_http_server/src/httpd_sess.c:50
#7  0x420426da in httpd_server (hd=hd@entry=0x3fcaf078) at /home/paalcald/esp/esp-idfv5.3/components/esp_http_server/src/httpd_main.c:312
#8  0x420427be in httpd_thread (arg=0x3fcaf078, arg@entry=<error reading variable: value has been optimized out>) at /home/paalcald/esp/esp-idfv5.3/components/esp_http_server/src/httpd_main.c:334
#9  0x40387146 in vPortTaskWrapper (pxCode=<optimized out>, pvParameters=<optimized out>) at /home/paalcald/esp/esp-idfv5.3/components/freertos/FreeRTOS-Kernel/portable/riscv/port.c:255



ELF file SHA256: bcb865559

Rebooting...
ESP-ROM:esp32c3-api1-20210207
Build:Feb  7 2021
rst:0xc (RTC_SW_CPU_RST),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x403807da
--- 0x403807da: esp_restart_noos at /home/paalcald/esp/esp-idfv5.3/components/esp_system/port/soc/esp32c3/system_internal.c:110

SPIWP:0xee
mode:DIO, clock div:1
load:0x3fcd5820,len:0x1738
load:0x403cc710,len:0xb9c
load:0x403ce710,len:0x2e4c
entry 0x403cc71a
I (24) boot: ESP-IDF v5.3.1 2nd stage bootloader
I (24) boot: compile time Oct 24 2024 09:56:02
I (24) boot: chip revision: v0.3
I (27) boot.esp32c3: SPI Speed      : 80MHz
I (32) boot.esp32c3: SPI Mode       : DIO
I (36) boot.esp32c3: SPI Flash Size : 4MB
I (41) boot: Enabling RNG early entropy source...
I (46) boot: Partition Table:
I (50) boot: ## Label            Usage          Type ST Offset   Length
I (57) boot:  0 nvs              WiFi data        01 02 00009000 00006000
I (65) boot:  1 phy_init         RF data          01 01 0000f000 00001000
I (72) boot:  2 factory          factory app      00 00 00010000 00100000
I (80) boot:  3 www              Unknown data     01 82 00110000 00200000
I (87) boot: End of partition table
I (91) esp_image: segment 0: paddr=00010020 vaddr=3c0c0020 size=23c44h (146500) map
I (123) esp_image: segment 1: paddr=00033c6c vaddr=3fc93000 size=02e48h ( 11848) load
I (125) esp_image: segment 2: paddr=00036abc vaddr=40380000 size=0955ch ( 38236) load
I (136) esp_image: segment 3: paddr=00040020 vaddr=42000020 size=b2578h (730488) map
I (251) esp_image: segment 4: paddr=000f25a0 vaddr=4038955c size=098f4h ( 39156) load
I (265) boot: Loaded app from partition at offset 0x10000
I (265) boot: Disabling RNG early entropy source...
I (277) cpu_start: Unicore app
I (285) cpu_start: Pro cpu start user code
I (285) cpu_start: cpu freq: 160000000 Hz
I (285) app_init: Application information:
I (288) app_init: Project name:     restful_server
I (294) app_init: App version:      1
I (298) app_init: Compile time:     Oct 24 2024 10:03:41
I (304) app_init: ELF file SHA256:  bcb865559...
I (309) app_init: ESP-IDF:          v5.3.1
I (314) efuse_init: Min chip rev:     v0.3
I (319) efuse_init: Max chip rev:     v1.99
I (324) efuse_init: Chip rev:         v0.3
I (328) heap_init: Initializing. RAM available for dynamic allocation:
I (336) heap_init: At 3FC9A830 len 000257D0 (149 KiB): RAM
I (342) heap_init: At 3FCC0000 len 0001C710 (113 KiB): Retention RAM
I (349) heap_init: At 3FCDC710 len 00002950 (10 KiB): Retention RAM
I (356) heap_init: At 50000200 len 00001DE8 (7 KiB): RTCRAM
I (363) spi_flash: detected chip: generic
I (367) spi_flash: flash io: dio
I (371) sleep: Configure to isolate all GPIO pins in sleep state
I (377) sleep: Enable automatic switching of GPIO sleep configuration
I (385) main_task: Started on CPU0
I (385) main_task: Calling app_main()
I (395) example_connect: Start example_connect.
I (405) pp: pp rom version: 9387209
I (405) net80211: net80211 rom version: 9387209
I (415) wifi:wifi driver task: 3fca4664, prio:23, stack:6656, core=0
I (415) wifi:wifi firmware version: ccaebfa
I (415) wifi:wifi certification version: v7.0
I (415) wifi:config NVS flash: enabled
I (425) wifi:config nano formating: disabled
I (425) wifi:Init data frame dynamic rx buffer num: 32
I (425) wifi:Init static rx mgmt buffer num: 5
I (435) wifi:Init management short buffer num: 32
I (435) wifi:Init dynamic tx buffer num: 32
I (445) wifi:Init static tx FG buffer num: 2
I (445) wifi:Init static rx buffer size: 1600
I (455) wifi:Init static rx buffer num: 10
I (455) wifi:Init dynamic rx buffer num: 32
I (455) wifi_init: rx ba win: 6
I (465) wifi_init: accept mbox: 6
I (465) wifi_init: tcpip mbox: 32
I (465) wifi_init: udp mbox: 6
I (475) wifi_init: tcp mbox: 6
I (475) wifi_init: tcp tx win: 5760
I (485) wifi_init: tcp rx win: 5760
I (485) wifi_init: tcp mss: 1440
I (485) wifi_init: WiFi IRAM OP enabled
I (495) wifi_init: WiFi RX IRAM OP enabled
I (495) phy_init: phy_version 1180,01f2a49,Jun  4 2024,16:34:25
I (545) wifi:mode : sta (60:55:f9:c0:27:d4)
I (545) wifi:enable tsf
I (545) example_connect: Connecting to Casita <3...
W (545) wifi:Password length matches WPA2 standards, authmode threshold changes from OPEN to WPA2
I (555) example_connect: Waiting for IP(s)
I (3235) wifi:new:<9,2>, old:<1,0>, ap:<255,255>, sta:<9,2>, prof:6, snd_ch_cfg:0x0
I (3235) wifi:state: init -> auth (0xb0)
I (3245) wifi:state: auth -> assoc (0x0)
I (3255) wifi:state: assoc -> run (0x10)
I (3275) wifi:connected with Casita <3, aid = 11, channel 9, 40D, bssid = c8:7f:54:a1:cc:90
I (3275) wifi:security: WPA2-PSK, phy: bgn, rssi: -38
I (3275) wifi:pm start, type: 1

I (3275) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (3285) wifi:set rx beacon pti, rx_bcn_pti: 0, bcn_timeout: 25000, mt_pti: 0, mt_time: 10000
I (3305) wifi:<ba-add>idx:0 (ifx:0, c8:7f:54:a1:cc:90), tid:6, ssn:1, winSize:64
I (3315) wifi:AP's beacon interval = 102400 us, DTIM period = 1
I (3695) wifi:<ba-add>idx:1 (ifx:0, c8:7f:54:a1:cc:90), tid:0, ssn:1, winSize:64
I (4295) esp_netif_handlers: example_netif_sta ip: 192.168.1.22, mask: 255.255.255.0, gw: 192.168.1.1
I (4295) example_connect: Got IPv4 event: Interface "example_netif_sta" address: 192.168.1.22
I (4395) example_connect: Got IPv6 event: Interface "example_netif_sta" address: fe80:0000:0000:0000:6255:f9ff:fec0:27d4, type: ESP_IP6_ADDR_IS_LINK_LOCAL
I (4395) example_common: Connected to example_netif_sta
I (4405) example_common: - IPv4 address: 192.168.1.22,
I (4405) example_common: - IPv6 address: fe80:0000:0000:0000:6255:f9ff:fec0:27d4, type: ESP_IP6_ADDR_IS_LINK_LOCAL
I (4465) example: Partition size: total: 1920401, used: 1742944
I (4475) esp-rest: Starting HTTP Server
I (4475) main_task: Returned from app_main()
E (31215) esp-rest: Failed to open file : /www/api/v1/temp
W (31215) httpd_txrx: httpd_resp_send_err: 500 Internal Server Error - Failed to read existing file
W (31215) httpd_uri: httpd_uri: uri handler execution failed

